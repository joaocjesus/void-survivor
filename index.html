<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Void Survivor</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" href="/assets/style.css" />
</head>

<body>
    <div id="app"></div>
    <div id="mainMenu" class="menu">
        <div class="menu-panel">
            <h1>Void Survivor</h1>
            <button id="btnStart">Start Run</button>
            <button id="btnMeta">Upgrades</button>
            <button id="btnStats">Statistics</button>
            <button id="btnInstructions">Instructions</button>
            <button id="btnSettings">Settings</button>
            <div class="small">v0.1 prototype</div>
        </div>
    </div>
    <div id="statsMenu" class="menu" style="display:none;">
        <div class="menu-panel" style="max-width:520px; text-align:left;">
            <h2 style="margin-top:0;">Statistics</h2>
            <div id="metaStatsContent" style="font-size:14px; line-height:1.5; white-space:pre-line; margin-top:4px;"></div>
            <button id="btnBackStats" class="back-btn" style="margin-top:18px;">Back</button>
        </div>
    </div>
    <div id="metaMenu" class="menu" style="display:none;">
        <div class="menu-panel meta-panel">
            <div class="meta-header" style="display:flex; align-items:center; justify-content:space-between; gap:16px;">
                <h2 class="meta-title" style="margin:0;">Meta Upgrades</h2>
                <div id="metaShards" class="meta-shards">Shards: 0</div>
            </div>
            <div id="metaList" class="meta-list"></div>
            <div style="display:flex; justify-content:space-between; margin-top:12px; gap:12px;">
                <button id="btnRefundMeta" class="secondary" style="flex:0 0 auto;">Refund All</button>
                <button id="btnBackMeta" class="back-btn" style="flex:0 0 auto;">Back</button>
            </div>
        </div>
    </div>
    <div id="instructionsMenu" class="menu" style="display:none;">
        <div class="menu-panel" style="max-width:640px; text-align:left;">
            <h2 style="margin-top:0;">Instructions</h2>
            <p><strong>Goal:</strong> Survive as long as possible while leveling up and collecting shards for permanent
                upgrades.</p>
            <ul style="line-height:1.5; padding-left:20px;">
                <li>Move with WASD / Arrows or left stick on a gamepad (basic controller support).</li>
                <li>Projectiles auto-fire toward the nearest enemy.</li>
                <li>Collect blue/purple XP gems to level up and choose upgrades.</li>
                <li>Purple (elite) gems grant 10Ã— XP.</li>
                <li>Shards (orange diamonds) fund permanent meta upgrades; elites always drop one.</li>
                <li>Press Tab to toggle detailed run stats.</li>
                <li>Avoid enemies; red contact damages you. Regeneration & upgrades help you survive.</li>
            </ul>
            <button id="btnBackInstructions" class="back-btn" style="margin-top:12px;">Back</button>
        </div>
    </div>
    <div id="settingsMenu" class="menu" style="display:none;">
        <div class="menu-panel" style="max-width:520px; text-align:left;">
            <h2 style="margin-top:0;">Settings</h2>
            <div style="margin:10px 0 20px; font-size:14px; opacity:.8;">(More settings coming soon.)</div>
            <button id="btnResetMeta" class="danger" style="margin-top:4px;">Reset Save</button>
            <div class="debugSection" style="display: none;"
                style="margin-top:28px; border-top:1px solid rgba(255,255,255,.08); padding-top:18px;">
                <div
                    style="font-size:13px; letter-spacing:.5px; text-transform:uppercase; opacity:.6; margin-bottom:8px;">
                    Debug (Local)</div>
                <button id="btnDebugExport" class="debug" style="width:240px;">Export Run Snapshot</button>
                <button id="btnDebugImport" class="debug" style="width:240px;">Import Run Snapshot</button>
                <div style="font-size:11px; opacity:.45; margin-top:6px; line-height:1.4; max-width:260px;">Snapshots
                    let you resume mid-run for testing. Disabled in production builds.</div>
            </div>
            <button id="btnBackSettings" class="back-btn" style="margin-top:20px;">Back</button>
        </div>
    </div>
    <!-- Top HUD strip for XP + Time -->
    <div id="topHud">
        <div class="xp-line">
            <div id="xpBar"></div>
            <div id="xpBarLabel">0 / 10 (0%)</div>
        </div>
        <div id="statusRow">
            <div id="levelHud">Level: <span id="level">1</span></div>
            <div class="time-line"><span id="time">0</span>s</div>
            <div id="killsHud" class="miniHud kills-inline">
                <div class="killsWrap">
                    <span class="killsLabel">Kills:</span>
                    <span id="kills" class="killsValue">0</span>
                </div>
            </div>
        </div>
    </div>
    <!-- Shards bottom-left -->
    <div id="shardsHud" class="miniHud">
        <div class="shardIcon" aria-hidden="true"></div>
        <div class="shardText"><span id="runShards">0</span><span class="sep"> / </span><span id="totalShards">0</span>
        </div>
    </div>
    <!-- HP bottom-center -->
    <div id="hpHud" class="miniHud">
        <div class="hpInner">
            <div class="heartIcon" aria-hidden="true"></div>
            <div class="hpNums"><span id="hp">100</span><span class="hpSep"> / </span><span id="hpMax">100</span></div>
        </div>
        <div class="hpBarShell">
            <div id="hpBar"></div>
        </div>
    </div>
    <div id="upgradeModal">
        <div class="panel">
            <h2>Choose an Upgrade</h2>
            <div class="upgrades" id="upgradeChoices"></div>
            <div class="footerHint">Press number keys (1-3) or click</div>
        </div>
    </div>
    <!-- Pause Menu -->
    <div id="pauseMenu"
        style="position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.6); z-index:15;">
        <div class="panel"
            style="background:#1c1f24; padding:30px 46px 40px; border-radius:22px; text-align:center; width:340px; box-shadow:0 14px 38px -6px rgba(0,0,0,.65);">
            <h2 style="margin:0 0 22px; font-size:26px; letter-spacing:1px;">Paused</h2>
            <div class="pauseBtns" style="display:flex; flex-direction:column; gap:14px;">
                <button id="btnResume" class="pmBtn"
                    style="padding:14px 18px; font-size:16px; background:#25313b; color:#dfe9f1; border:1px solid #355062; border-radius:12px; cursor:pointer; transition:.15s background, border-color, transform;">Resume</button>
                <button id="btnQuit" class="pmBtn"
                    style="padding:14px 18px; font-size:16px; background:#25313b; color:#dfe9f1; border:1px solid #355062; border-radius:12px; cursor:pointer; transition:.15s background, border-color, transform;">Quit
                    to Menu</button>
            </div>
            <div style="margin-top:18px; font-size:12px; opacity:.55;">Esc / P or Start to toggle</div>
        </div>
    </div>
    <div id="statsOverlay" class="stats-hidden">
        <strong>Run Stats</strong>
        <div id="statsContent"></div>
        <div class="stats-hint">(Press Tab to toggle)</div>
    </div>
    <script type="module" src="/src/main.ts"></script>
    <div id="toastRoot" class="toast-container" aria-live="polite" aria-atomic="true"></div>
</body>

</html>